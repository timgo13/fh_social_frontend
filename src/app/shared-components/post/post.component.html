<div class="box post">
  <article class="media">
    <div class="media-content">
      <div class="content">
        <p>
          <strong><a [routerLink]="['/','user', post.creator.id]">{{post.creator.username}}</a><span *ngIf="post.group"> @ <a [routerLink]="['/','group', post.group.id]">{{ post.group.name }}</a></span></strong>
          <br>
          <small>{{post.created_at | date:'medium'}}</small>
        </p>
        <div class="post_content_wrapper">
          {{post.content ? post.content : 'No content'}}
        </div>
        <app-post *ngIf="post.child_post != null" [showShareButton]="showShareButton" [post]="post.child_post"></app-post>
      </div>

      <nav *ngIf="showShareButton" class="level is-mobile">
        <div class="level-left">
          <a class="level-item" aria-label="like" (click)="onShareClick()">
            <span class="icon is-small">
              <svg class="svg-inline--fa fa-retweet fa-w-20" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="retweet" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" data-fa-i2svg=""><path fill="currentColor" d="M629.657 343.598L528.971 444.284c-9.373 9.372-24.568 9.372-33.941 0L394.343 343.598c-9.373-9.373-9.373-24.569 0-33.941l10.823-10.823c9.562-9.562 25.133-9.34 34.419.492L480 342.118V160H292.451a24.005 24.005 0 0 1-16.971-7.029l-16-16C244.361 121.851 255.069 96 276.451 96H520c13.255 0 24 10.745 24 24v222.118l40.416-42.792c9.285-9.831 24.856-10.054 34.419-.492l10.823 10.823c9.372 9.372 9.372 24.569-.001 33.941zm-265.138 15.431A23.999 23.999 0 0 0 347.548 352H160V169.881l40.416 42.792c9.286 9.831 24.856 10.054 34.419.491l10.822-10.822c9.373-9.373 9.373-24.569 0-33.941L144.971 67.716c-9.373-9.373-24.569-9.373-33.941 0L10.343 168.402c-9.373 9.373-9.373 24.569 0 33.941l10.822 10.822c9.562 9.562 25.133 9.34 34.419-.491L96 169.881V392c0 13.255 10.745 24 24 24h243.549c21.382 0 32.09-25.851 16.971-40.971l-16.001-16z"></path></svg>
            </span>
          </a>
        </div>
      </nav>

    </div>
  </article>
</div>



<!-- share post modal START-->
<div class="modal" [ngClass]="{'is-active': shareModalActive}">
  <div class="modal-background"></div>
  <div class="modal-card">
    <header class="modal-card-head">
      <p class="modal-card-title">{{ 'post.share.title' | translate }}</p>
      <button class="delete" aria-label="close" (click)="onCloseModalClick()"></button>
    </header>
    <section class="modal-card-body">
      <div *ngIf="!postCreated">
        <label for="groupSelector">{{ 'post.share.share-in' | translate }}</label>
        <ng-select id="groupSelector" [(ngModel)]="selectedGroupID" (change)="groupSelected()">
          <ng-option *ngFor="let group of groups" [value]="group.id">{{group.name}}</ng-option>
        </ng-select>
      </div>

      <span *ngIf="postCreated" class="has-text-primary">{{ 'post.share.done' | translate }}</span>

      <div class="box post">
        <!-- new post START-->
        <article class="media">
          <div class="media-content">
            <div class="content">
              <p>
                <strong>{{authenticatedUserUsername}}<span *ngIf="selectedGroup"> @ {{ selectedGroup.name }}</span></strong>
                <br>
                <small>{{currentDate | date:'medium'}}</small>
              </p>
              <div class="post_content_wrapper">
                <span *ngIf="postCreated">{{createPostDto.content}}</span>
                <div class="control"  *ngIf="!postCreated">
                  <textarea class="textarea" placeholder="{{ 'post.share.placeholder' | translate }}"  [(ngModel)]="createPostDto.content"></textarea>
                </div>
              </div>

              <p class="has-text-danger has-text-centered has-text-weight-bold" *ngIf="toShort">{{ 'post.create.to_short'| translate }}</p>

              <!-- shared post START -->
              <div class="box post">
                <article class="media">
                  <div class="media-content">
                    <div class="content">
                      <p>
                        <strong>{{post.creator.username}}<span *ngIf="post.group"> @ {{ post.group.name }}</span></strong>
                        <br>
                        <small>{{post.created_at | date:'medium'}}</small>
                      </p>
                      <div class="post_content_wrapper">
                        {{post.content ? post.content : 'No content'}}
                      </div>
                      <app-post [showShareButton]="false" *ngIf="post.child_post != null" [post]="post.child_post"></app-post>
                    </div>
                  </div>
                </article>
              </div>
              <!-- shared post END-->




            </div>
          </div>
        </article>
        <!-- new post END -->


      </div>
    </section>
    <footer class="modal-card-foot" *ngIf="!postCreated">
      <button class="button" (click)="onCloseModalClick()">{{ 'post.share.cancel' | translate }}</button>
      <button [ngClass]="{ 'disabled': loading }" class="button is-success" (click)="onSubmitSharePostClick()">{{ 'post.share.submit' | translate }}</button>
    </footer>
  </div>
</div>
<!-- share post modal END-->
